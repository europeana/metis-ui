<app-statistics [datasetData]="datasetData"></app-statistics>

<app-notification
  [notification]="notification"
  (closed)="notification = undefined"
></app-notification>

<div class="btns-set btns-set-right">
  <button (click)="tryOutXSLT('default')">{{ 'xslttryoutdefault' | translate }}</button>
</div>

<div class="messages" *ngIf="xsltStatus === 'loading'">
  <div class="success-message">
    <span class="svg-icon-spin-inbutton"></span> {{ 'xsltloading' | translate }}
  </div>
</div>

<div class="btns-set btns-set-right" *ngIf="xsltStatus === 'no-custom'">
  <span>{{ 'xsltaskloaddefault' | translate }}</span>
  <button (click)="loadDefaultXSLT()">{{ 'xsltinitdefault' | translate }}</button>
</div>

<div *ngIf="xsltStatus === 'has-custom' || xsltStatus === 'new-custom'">
  <div class="view-sample view-sample-expanded">
    <div class="view-sample-title">
      <h3>{{ 'xsltcustom' | translate }}</h3>
      <app-theme-selector
        (themeSet)="onThemeSet($event)"
        [editorIsDefaultTheme]="editorIsDefaultTheme"
      ></app-theme-selector>
    </div>
    <div class="view-sample-editor">
      <div class="view-sample-editor-codemirror">
        <codemirror
          [ngModel]="xslt! | beautifyXML"
          (ngModelChange)="xsltToSave = $event"
          [config]="editorConfig"
        ></codemirror>
      </div>
    </div>
  </div>

  <div class="btns-set btns-set-right">
    <button (click)="cancel()" *ngIf="xsltStatus === 'new-custom'">
      {{ 'cancel' | translate }}
    </button>
    <button (click)="loadDefaultXSLT()">{{ 'xsltresetdefault' | translate }}</button>
    <button (click)="loadCustomXSLT()" *ngIf="xsltStatus === 'has-custom'">
      {{ 'xsltreloadcustom' | translate }}
    </button>
    <button (click)="saveCustomXSLT(false)">{{ 'save' | translate }}</button>
    <button (click)="saveCustomXSLT(true)">{{ 'xslttryout' | translate }}</button>
  </div>
</div>
