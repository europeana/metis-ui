<div
  class="show-on-hover"
  *ngIf="workflowForm.get('pluginHARVEST')!.disabled || !workflowForm.get('pluginHARVEST')!.value"
>
  <span class="content" [innerHTML]="getImportSummary()"></span>
</div>
<div
  class="form-group"
  *ngIf="!workflowForm.get('pluginHARVEST')!.disabled && workflowForm.get('pluginHARVEST')!.value"
>
  <label>{{ 'harvestprotocol' | translate }} *</label>
  <div class="form-group-radios" [formGroup]="workflowForm">
    <label>
      <input
        type="radio"
        formControlName="pluginType"
        value="OAIPMH_HARVEST"
        (change)="changeHarvestProtocol('OAIPMH_HARVEST')"
        [checked]="conf.harvestprotocol === 'OAIPMH_HARVEST' ? true : false"
        (click)="onFieldChanged('pluginHARVEST')"
      />
      {{ 'oai' | translate }}
    </label>
    <label>
      <input
        type="radio"
        formControlName="pluginType"
        value="HTTP_HARVEST"
        (change)="changeHarvestProtocol('HTTP_HARVEST')"
        [checked]="conf.harvestprotocol === 'HTTP_HARVEST' ? true : false"
      />
      {{ 'http' | translate }}
    </label>
  </div>
</div>

<ng-container
  *ngIf="!workflowForm.get('pluginHARVEST')!.disabled && workflowForm.get('pluginHARVEST')!.value"
>
  <div
    class="form-group"
    *ngIf="conf.harvestprotocol === 'OAIPMH_HARVEST'"
    [formGroup]="workflowForm"
  >
    <label for="harvest-url">{{ 'harvesturl' | translate }} *</label>
    <input id="harvest-url" type="text" formControlName="harvestUrl" />
    <div
      class="messages"
      *ngIf="
        workflowForm.get('harvestUrl')!.errors &&
        workflowForm.get('harvestUrl')!.dirty &&
        workflowForm.get('harvestUrl')!.errors!.validParameter
      "
    >
      <div class="error-message">{{ 'errorharvestparameters' | translate }}</div>
    </div>
    <div
      class="messages"
      *ngIf="
        workflowForm.get('harvestUrl')!.errors &&
        workflowForm.get('harvestUrl')!.dirty &&
        workflowForm.get('harvestUrl')!.errors!.validUrl
      "
    >
      <div class="error-message">{{ 'errorharvesturl' | translate }}</div>
    </div>
  </div>
  <div
    class="form-group"
    *ngIf="conf.harvestprotocol === 'OAIPMH_HARVEST'"
    [formGroup]="workflowForm"
  >
    <label for="setspec">{{ 'setspec' | translate }}</label>
    <input id="setspec" type="tel" formControlName="setSpec" />
  </div>
  <div
    class="form-group"
    *ngIf="conf.harvestprotocol === 'OAIPMH_HARVEST'"
    [formGroup]="workflowForm"
  >
    <label for="metadata-format">{{ 'metadataformat' | translate }} *</label>
    <input id="metadata-format" type="text" formControlName="metadataFormat" />
  </div>
  <div
    class="form-group"
    *ngIf="conf.harvestprotocol === 'HTTP_HARVEST'"
    [formGroup]="workflowForm"
  >
    <label for="url">{{ 'url' | translate }} *</label>
    <input id="url" type="text" formControlName="url" />
    <div
      class="messages"
      *ngIf="
        workflowForm.get('url')!.errors &&
        workflowForm.get('url')!.dirty &&
        workflowForm.get('url')!.errors!.validParameter
      "
    >
      <div class="error-message">{{ 'errorharvestparameters' | translate }}</div>
    </div>
    <div
      class="messages"
      *ngIf="
        workflowForm.get('url')!.errors &&
        workflowForm.get('url')!.dirty &&
        workflowForm.get('url')!.errors!.validUrl
      "
    >
      <div class="error-message">{{ 'errorharvesturl' | translate }}</div>
    </div>
  </div>
</ng-container>
