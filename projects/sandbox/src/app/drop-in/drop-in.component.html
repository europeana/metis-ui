<div
  #elRefDropIn
  class="drop-in"
  libClickAware
  (clickOutside)="clickOutside()"
  [ignoreClasses]="['drop-in-source']"
  (keyup.esc)="escape()"
  [ngClass]="{
    'view-suggest': viewMode() === 0,
    'view-pinned': viewMode() === 1,
    active: visible()
  }"
>
  <div *ngIf="viewMode() === ViewMode.PINNED" class="tools">
    <span title="TODO: sortability">Id</span>
    <span title="TODO: sortability">Name</span>
    <span title="TODO: sortability">Description</span>
    <span title="TODO: sortability">Date</span>
  </div>

  <div *ngIf="visible()" class="item-list" #scrollInfo="scrollInfo" appIsScrollable tabindex="-1">
    <div class="item-list-inner">
      <ng-container *ngFor="let item of dropInModel(); let i = index">
        <a
          #identifier
          (focus)="inert.set(false)"
          [attr.tabindex]="i > 0 && inert() ? -1 : 0"
          class="item-identifier"
          (keyup.shift.enter)="toggleViewMode(identifier, $event)"
          (keydown.enter)="submit(item.id)"
          (click)="submit(item.id, true)"
        >
          {{ item.id }}
        </a>
        <span class="item-detail-wrapper">
          <span
            class="item-detail"
            #detail
            [ngStyle]="{
              transform:
                'translateY(' + getDetailOffsetY(i, scrollInfo.actualScroll(), detail) + 'px)'
            }"
          >
            <span class="detail-field name">
              {{ item.name }}
            </span>

            <span class="detail-field">
              <span class="hide-when-pinned">Description: </span>
              <span>{{ item.description }}</span>
            </span>

            <span class="detail-field">
              <span class="hide-when-pinned">Created on: </span>
              <span>{{ item.date | date: 'dd/MM/yyyy - HH:mm' }}</span>
            </span>
          </span>
        </span>
      </ng-container>
    </div>
  </div>
</div>
