<nav attr.aria-label="{{ ariaLabel }}">
  <ul class="sandbox-status">
    <ng-template #orbItem let-itemIndex="itemIndex">
      <span [attr.title]="tooltips.length > itemIndex ? tooltips[itemIndex] : null">
        <a
          (click)="clicked($event, itemIndex)"
          [ngClass]="fnClassMapInner(itemIndex)"
          class="nav-orb labelled"
          [attr.data-label]="itemIndex + 1"
          [attr.aria-label]="
            tooltips.length > itemIndex && links.length > itemIndex ? tooltips[itemIndex] : null
          "
          [attr.href]="links.length > itemIndex ? links[itemIndex] : null"
          [attr.data-indicator]="_indicatorAttributes[itemIndex]"
          [attr.tabindex]="fnClassMapInner(itemIndex)['is-active'] ? -1 : 0"
        >
        </a>
      </span>
    </ng-template>
    <ng-template #showCollapsed>
      <li>
        <button
          class="nav-orb labelled previous"
          [ngClass]="{ disabled: index < 1 }"
          [disabled]="index < 1"
          (click)="clickedPrev()"
        ></button>
      </li>
      <li class="orb-container" [ngClass]="fnClassMapOuter(index)">
        <ng-content *ngTemplateOutlet="orbItem; context: { itemIndex: index }"></ng-content>
      </li>
      <li>
        <button
          class="nav-orb labelled next"
          [ngClass]="{ disabled: index + 1 >= steps.length }"
          [disabled]="index + 1 >= steps.length"
          (click)="clickedNext()"
        ></button>
      </li>
    </ng-template>

    <ng-container *ngIf="!collapsed; else showCollapsed">
      <li *ngFor="let step of steps" class="orb-container" [ngClass]="fnClassMapOuter(step)">
        <ng-content *ngTemplateOutlet="orbItem; context: { itemIndex: step }"></ng-content>
      </li>
    </ng-container>
  </ul>
</nav>
