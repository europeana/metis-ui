<app-statistics [datasetData]="datasetData"></app-statistics>

<app-notification
  [notification]="notification"
  (closed)="notification = undefined"
></app-notification>

<div class="btns-set btns-set-right">
  <button class="button-filled" (click)="tryOutXSLT('default')">
    {{ 'xsltTryOutDefault' | translate }}
  </button>
</div>

<div class="messages" *ngIf="xsltStatus === 'loading'">
  <div class="success-message">
    <span class="svg-icon-spin-inbutton"></span> {{ 'xsltLoading' | translate }}
  </div>
</div>

<div class="btns-set btns-set-right" *ngIf="xsltStatus === 'no-custom'">
  <span>{{ 'xsltTaskLoadDefault' | translate }}</span>
  <button class="button-filled" (click)="loadDefaultXSLT()">
    {{ 'xsltInitDefault' | translate }}
  </button>
</div>

<div *ngIf="xslt && ['has-custom', 'new-custom'].includes(xsltStatus)">
  <div class="view-sample view-sample-expanded">
    <div class="view-sample-title">
      <div class="title-controls">
        <h3>{{ 'xsltCustom' | translate }}</h3>
        <app-editor-drop-down
          (themeSet)="onThemeSet($event)"
          [editorIsDefaultTheme]="editorConfig.theme === 'default'"
          [xmlDownloads]="[
            {
              ecloudId: datasetData ? datasetData.datasetId : '',
              xmlRecord: xslt,
              label: 'Custom'
            }
          ]"
        ></app-editor-drop-down>
      </div>
    </div>
    <div class="view-sample-editor">
      <div class="view-sample-editor-codemirror">
        <ngx-codemirror
          [ngModel]="xslt | beautifyXML"
          (ngModelChange)="xsltToSave = $event"
          [options]="editorConfig"
        ></ngx-codemirror>
      </div>
    </div>
  </div>

  <div class="btns-set btns-set-right">
    <button class="button-filled" (click)="cancel()" *ngIf="xsltStatus === 'new-custom'">
      {{ 'cancel' | translate }}
    </button>
    <button class="button-filled" (click)="loadDefaultXSLT()">
      {{ 'xsltResetDefault' | translate }}
    </button>
    <button class="button-filled" (click)="loadCustomXSLT()" *ngIf="xsltStatus === 'has-custom'">
      {{ 'xsltReloadCustom' | translate }}
    </button>
    <button class="button-filled" (click)="saveCustomXSLT(false)">{{ 'save' | translate }}</button>
    <button class="button-filled" (click)="saveCustomXSLT(true)">
      {{ 'xsltTryOut' | translate }}
    </button>
  </div>
</div>
